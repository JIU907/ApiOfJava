## 第四章 对象的组合

### 4.1设计线程安全的类

```
线程安全类的三要素

*：找出构造状态的所有变量
*：找出约束状态变量的不变性条件
*：建立对象状态的并发访问管理策略
```
**同步策略**

```
定义了
1.如何在不违背对象不变条件或后验条件的情况下对其状态的访问操作进行协同
	*：后验性条件：例如线性递增的操作，后一个状态依赖前一个状态
	            那么操作必须得是一个复合操作
2.规定如何将不可变性，线程封闭与加锁机制等结合起来以维护线程安全性
```

**同步需求**

```
不变性条件：Integer.Max_Value
后验性条件：线形递增
约束多个状态的不变性条件: {
	1.例如一个对象中有2个字段，表示上限和下限
	2.具体数值不关心，但必须保证 上限>=下限
	3.这就必须保证对于2个值的操作必须处于一个原子操作
}
```



